<mat-card  class="car"  appearance="outlined">
  <h1>LISTA DE USUARIO</h1>
</mat-card>

<div class="container">
  <div class="mt-3" align="right">
    <a type="submit"   class="btn btn-outline-primary mb-2" data-bs-toggle="modal" data-bs-target="#UsuarioModal">
    AGREGAR USUARIO
    </a>
   </div>

        <!-- Tabla de Usuarios -->
        <div class="row">
          <div class="col-md-12">
              <div class="table-responsive">
                  <table class="table table-bordered table-hover">
                      <thead class="bg-success text-white">
                          <tr>
                              <th>Id</th>
                              <th>Cedula</th>
                              <th>Nombre</th>
                              <th>Apellido</th>
                              <th>Usuario</th>
                              <th>Email</th>
                              <th>Estado</th>
                              <th>Acciones</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let usuario of paginatedItems; trackBy: trackById">
                              <td>{{ usuario.usuarioId }}</td>
                              <td>{{ usuario.usuarioCedula}}</td>
                              <td>{{ usuario.usuarioNombre }}</td>
                              <td>{{ usuario.usuarioApellido }}</td>
                              <td>{{ usuario.usuarioUP }}</td>
                              <td>{{ usuario.usuarioEmail }}</td>


                              <td>{{ usuario.usuarioEstado ? 'Activo' : 'Inactivo' }}</td>
                              <td>
                                  <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#editUsuarioModal" (click)="selectedUsuario = usuario">
                                      <i class="bi bi-pencil"></i>
                                  </button>
                                  <button class="btn btn-danger btn-sm" (click)="eliminarUsuario(usuario.usuarioId)">
                                      <i class="bi bi-trash"></i>
                                  </button>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>
              <nav *ngIf="totalPages > 1">
                  <ul class="pagination justify-content-center">
                      <li class="page-item" [class.disabled]="page === 1">
                          <button class="page-link" (click)="page = page - 1" [disabled]="page === 1">Anterior</button>
                      </li>
                      <li class="page-item" *ngFor="let p of [].constructor(totalPages); let i = index" [class.active]="page === i + 1">
                          <button class="page-link" (click)="page = i + 1">{{ i + 1 }}</button>
                      </li>
                      <li class="page-item" [class.disabled]="page === totalPages">
                          <button class="page-link" (click)="page = page + 1" [disabled]="page === totalPages">Siguiente</button>
                      </li>
                  </ul>
              </nav>
          </div>
      </div>
  </div>


   <!-- Modal Nuevo Registro -->
   <div class="modal fade" id="UsuarioModal" tabindex="-1" aria-labelledby="UsuarioModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="UsuarioModalLabel">Agregar Usuario</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                  <div class="mb-3">
                    <label for="direccion" class="form-label">Cedula</label>
                    <input type="text" class="form-control" id="direccion" [(ngModel)]="newUsuario.usuarioCedula" name="direccion">
                </div>
                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="nombre" [(ngModel)]="newUsuario.usuarioNombre" name="nombre">
                    </div>
                    <div class="mb-3">
                        <label for="apellido" class="form-label">Apellido</label>
                        <input type="text" class="form-control" id="apellido" [(ngModel)]="newUsuario.usuarioApellido" name="apellido">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" [(ngModel)]="newUsuario.usuarioEmail" name="email">
                    </div>
                    <div class="mb-3">
                      <label for="telefono" class="form-label">Usuario</label>
                      <input type="text" class="form-control" id="telefono" [(ngModel)]="newUsuario.usuarioUP" name="telefono">
                  </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" [(ngModel)]="newUsuario.usuarioPassword" name="password">
                    </div>
                    <div class="mb-3">
                        <label for="estado" class="form-label">Estado</label>
                        <div class="d-flex align-items-center">
                            <input type="checkbox" id="estado" [(ngModel)]="newUsuario.usuarioEstado" name="estado">
                            <label for="estado" class="form-check-label ms-2">Activo</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="addUsuario()">Agregar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Editar Registro -->
<div class="modal fade" id="editUsuarioModal" tabindex="-1" aria-labelledby="editUsuarioModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="editUsuarioModalLabel">Editar Usuario</h2>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form *ngIf="selectedUsuario">
                    <div class="mb-3">
                      <div class="mb-3">
                        <label for="editDireccion" class="form-label">Cedula</label>
                        <input type="text" class="form-control" id="editDireccion" [(ngModel)]="selectedUsuario.usuarioCedula" name="editDireccion">
                    </div>
                        <label for="editNombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="editNombre" [(ngModel)]="selectedUsuario.usuarioNombre" name="editNombre">
                    </div>
                    <div class="mb-3">
                        <label for="editApellido" class="form-label">Apellido</label>
                        <input type="text" class="form-control" id="editApellido" [(ngModel)]="selectedUsuario.usuarioApellido" name="editApellido">
                    </div>
                    <div class="mb-3">
                      <label for="editTelefono" class="form-label">Usuario</label>
                      <input type="text" class="form-control" id="editTelefono" [(ngModel)]="selectedUsuario.usuarioUP" name="editTelefono">
                  </div>
                    <div class="mb-3">
                        <label for="editEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="editEmail" [(ngModel)]="selectedUsuario.usuarioEmail" name="editEmail">
                    </div>
                    <div class="mb-3">
                        <label for="editEstado" class="form-label">Estado</label>
                        <div class="d-flex align-items-center">
                            <input type="checkbox" id="editEstado" [(ngModel)]="selectedUsuario.usuarioEstado" name="editEstado">
                            <label for="editEstado" class="form-check-label ms-2">Activo</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" (click)="updateUsuario()">Actualizar</button>
            </div>
        </div>
    </div>
</div>

