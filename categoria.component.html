<div class="container">

  <div class="container-informacion bg-light mt-4">

      <!-- Tarjeta para Agrupación de Filtros -->
      <div class="card mb-4 bg-light">
          <div class="card-body">
              <div class="row g-3 justify-content-center">
                  <!-- Filtro por Producto -->
                  <div class="col-auto text-center">
                      <div class="mb-3">
                          <label for="filtroNombre" class="form-label text-primary">Buscar Categoria</label>
                          <input type="text" class="form-control form-control-sm" id="filtroNombre" [(ngModel)]="filtroNombre" (input)="filtrar()">
                      </div>
                  </div>

              </div>
          </div>
      </div>

      <!-- Botón de Agregar Inventario -->
      <div class="container-fluid mb-4">
          <div class="row">
              <div class="col-md-12 d-flex justify-content-end">
                  <button type="button" class="btn btn-success shadow" data-bs-toggle="modal" data-bs-target="#inventarioModal">Agregar Inventario</button>
              </div>
          </div>
      </div>

      <!-- Tabla de Inventario -->
      <div class="row">
          <div class="col-md-12">
              <div class="table-responsive">
                  <table class="table table-bordered table-hover">
                      <thead class="bg-success text-white">
                          <tr>
                              <th>Id</th>
                              <th>Nombre</th>
                              <th>Descripcion</th>
                              <th>Estado</th>
                              <th>Acciones</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let inventario of paginatedItems; trackBy: trackById">
                              <td>{{ inventario.categoriaId }}</td>
                              <td>{{ inventario.categoriaNombre }}</td>
                              <td>{{ inventario.descripcion}}</td>
                              <td>{{ inventario.categoriaEstado}}</td>
                              <td>
                                  <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#editInventarioModal" (click)="selectedCategoria = inventario">
                                      <i class="bi bi-pencil"></i>
                                  </button>
                                  <button class="btn btn-danger btn-sm" (click)="eliminarCategoria(inventario.categoriaId)">
                                      <i class="bi bi-trash"></i>
                                  </button>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>
              <nav *ngIf="totalPages > 1">
                  <ul class="pagination justify-content-center">
                      <li class="page-item" [class.disabled]="page === 1">
                          <button class="page-link" (click)="page = page - 1" [disabled]="page === 1">Anterior</button>
                      </li>
                      <li class="page-item" *ngFor="let p of [].constructor(totalPages); let i = index" [class.active]="page === i + 1">
                          <button class="page-link" (click)="page = i + 1">{{ i + 1 }}</button>
                      </li>
                      <li class="page-item" [class.disabled]="page === totalPages">
                          <button class="page-link" (click)="page = page + 1" [disabled]="page === totalPages">Siguiente</button>
                      </li>
                  </ul>
              </nav>
          </div>
      </div>
  </div>


  <!-- Modal Nuevo Registro -->
  <div class="modal fade" id="inventarioModal" tabindex="-1" aria-labelledby="inventarioModalLabel" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h2 class="modal-title" id="inventarioModalLabel">Agregar Categoria</h2>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <form>
                    <div class="mb-3">
                      <label for="editTipo" class="form-label">Nombre</label>
                      <input type="text" class="form-control" id="nombre" [(ngModel)]="newCategoria.categoriaNombre" name="editTipo">
                  </div>
                  <div class="mb-3">
                    <label for="editTipo" class="form-label">Descripcion</label>
                    <input type="text" class="form-control" id="descripcion" [(ngModel)]="newCategoria.descripcion" name="editTipo">
                </div>
                  <div class="mb-3">
                      <label for="editProveedor" class="form-label">Estado</label>
                      <input type="text" class="form-control" id="estado" [(ngModel)]="newCategoria.categoriaEstado" name="editTipo">

                  </div>

                  </form>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <button type="button" class="btn btn-primary" (click)="addCategoria()">Agregar</button>
              </div>
          </div>
      </div>
  </div>


  <!-- Modal de Editar Registro -->
  <div class="modal fade" id="editInventarioModal" tabindex="-1" aria-labelledby="editInventarioModalLabel" aria-hidden="true">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <h2 class="modal-title" id="editInventarioModalLabel">Editar Categoria</h2>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                  <form *ngIf="selectedCategoria">

                      <div class="mb-3">
                          <label for="editTipo" class="form-label">Nombre</label>
                          <input type="text" class="form-control" id="editTipo" [(ngModel)]="selectedCategoria.categoriaNombre" name="editTipo">
                      </div>
                      <div class="mb-3">
                        <label for="editTipo" class="form-label">Descripcion</label>
                        <input type="text" class="form-control" id="editTipo" [(ngModel)]="selectedCategoria.descripcion" name="editTipo">
                    </div>
                      <div class="mb-3">
                          <label for="editProveedor" class="form-label">Estado</label>
                          <select class="form-select" id="editProveedor" [(ngModel)]="selectedCategoria.categoriaEstado" name="editProveedor">
                              <option> Activo</option>
                              <option> Eliminado</option>
                          </select>
                      </div>
                  </form>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                  <button type="button" class="btn btn-primary" (click)="updateInventario()">Actualizar</button>
              </div>
          </div>
      </div>
  </div>

</div>
